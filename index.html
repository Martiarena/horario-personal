<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<title>Horario anual</title>
	<style>
		body {
			font-family: monospace;
			white-space: pre-wrap;
			line-height: 1.4;
		}
		.generar {
			display: flex;
		}
		h1, h2, h3, h4, h5, h6 {
			margin: 0;
		}
		textarea {
			width: 100%;
			height: 70vh;
		}
	</style>
</head>
<body><h1>Mis actividades por año</h1>
<div><label for="yearInput"><strong>Año:</strong></label> <input type="number" id="yearInput" min="1900" max="2100"> <button id="generar">Generar</button></div>
<textarea id="output"></textarea>
<script>
	const output = document.getElementById("output");

	const diasSemana = [
		"Domingo",
		"Lunes",
		"Martes",
		"Miércoles",
		"Jueves",
		"Viernes",
		"Sábado"
	];

	const meses = [
		"enero",
		"febrero",
		"marzo",
		"abril",
		"mayo",
		"junio",
		"julio",
		"agosto",
		"septiembre",
		"octubre",
		"noviembre",
		"diciembre"
	];

	function randomLetra(opciones) {
		return opciones[Math.floor(Math.random() * opciones.length)];
	}

	function getLetra(diaSemana) {
		const esFinDeSemana = diaSemana === 0 || diaSemana === 6;
		return esFinDeSemana
			? randomLetra(["P", "J"])
			: randomLetra(["A", "J"]);
	}

	function generarTexto(year) {
		let texto = "";
		let fecha = new Date(year, 0, 1);

		// Alinear al lunes
		while (fecha.getDay() !== 1) {
			fecha.setDate(fecha.getDate() - 1);
		}

		let semana = 1;
		const fin = new Date(year + 1, 0, 1);

		while (fecha < fin) {
			texto += "++++++++++++++++++++++++++++++++++++++++++++ Semana " + semana + "\n";
			texto += "Publicación semanal de True Role Dreams: [     ]\n";

			for (let i = 0; i < 7; i++) {
				const dia = fecha.getDay();

				if (fecha.getFullYear() === year) {
					const letra = getLetra(dia);
					const lineaFecha =
						`${diasSemana[dia]} ${fecha.getDate()} de ${meses[fecha.getMonth()]}`;

					texto += "---------- " + lineaFecha + ": " + letra + "\n";

					// BLOQUE DE TAREAS FIJAS
					if (dia >= 1 && dia <= 5) { // Lunes a Viernes
						texto += "x Escribir para redes: 40 min\n";
						if (dia !== 2 && dia !== 4) {
							texto += "x Game Dev\n";
							if (dia === 5) {
								texto += "x Game Dev (Alterno)\n";
							}else{
								texto += "x Game Dev\n";
							}
						}
						texto += "Trabajo [8 horas] (Inglés 15 min)\n";
						if (dia === 2 || dia === 4) {
							texto += "Trabajo [1 hora]\n";
						}
					}

					if (dia === 6) { // Sábado
						texto += "x Escribir para redes: 40 min\n";
						texto += "Trabajo [6 horas]\n";
						texto += "x Hora Libre\n";
					}

					if (dia === 0) { // Domingo
						texto += "x Escribir para redes: 40 min\n";
						texto += "x Kasumi Cuidados\n";
					}
				}

				fecha.setDate(fecha.getDate() + 1);
			}

			semana++;
		}

		return texto;
	}


	const yearInput = document.getElementById("yearInput");
	const btnGenerar = document.getElementById("generar");

	// Año actual por defecto
	const yearActual = new Date().getFullYear();
	yearInput.value = yearActual;
	output.value = generarTexto(yearActual);

	// Regenerar al cambiar año
	btnGenerar.addEventListener("click", () => {
		const year = parseInt(yearInput.value);
		if (!isNaN(year)) {
			output.value = generarTexto(year);
		}
	});
</script>

</body>
</html>
